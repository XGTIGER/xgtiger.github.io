<!DOCTYPE html>
<html lang="en">
<head>
        <title>XGTIGER's Notes</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="/theme/css/main.css" type="text/css" />
        <link href="/" type="application/atom+xml" rel="alternate" title="XGTIGER's Notes ATOM Feed" />


        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie.css"/>
                <script src="/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="">XGTIGER's Notes </a></h1>
                <nav><ul>
                    <li ><a href="/category/ansible.html">Ansible</a></li>
                </ul></nav>
        </header><!-- /#banner -->
        
        
        <aside id="featured" class="body"><article>
                <h1 class="entry-title"><a href="/ansible-kuai-su-shang-shou-role.html">ansible 快速上手--role</a></h1> 
<footer class="post-info">
        <abbr class="published" title="2015-04-20T18:20:00+08:00">
                一 20 四月 2015
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/wyk.html">wyk</a>
        </address>
<p>In <a href="/category/ansible.html">Ansible</a>. </p>
</p>
</footer><!-- /.post-info -->                <p>让ansible 工作的真正的姿势,还是使用<a href="http://docs.ansible.com/ansible/playbooks_roles.html">role</a>
简单来说,role的组织类似pypi,是ansible的功能包.
ansible有类似dockerhub的东东:ansible-galaxy ,你可以安装某人发布的role :</p>
<div class="highlight"><pre><span></span>ansible-galaxy install username.rolename
</pre></div>


<p>或开始创建一个新的role:</p>
<div class="highlight"><pre><span></span>ansible-galaxy init testrole
</pre></div>


<p>这样名称为<em>testrole</em>的role就初始化好了,看看它的结构:</p>
<div class="highlight"><pre><span></span>├── defaults
│   └── main.yml
├── files
├── handlers
│   └── main.yml
├── meta
│   └── main.yml
├── README.md
├── tasks
│   └── main.yml
├── templates
├── tests
│   ├── inventory
│   └── test.yml
└── vars
    └── main.yml
</pre></div>


<ul>
<li>defaults:简单说就是可以配置默认值的位置.</li>
<li>files: 可以将你在项目中使用的任何文件,比如自定的脚本(远程)/安装包等等,放在这里,注意在使用这个文件时,你不需要指明路径,ansible自动处理</li>
<li>handlers: 意义和playbook中的意义相同</li>
<li>meta: 可定义作者/版本/依赖等信息</li>
<li>vars: 定义变量.这里有个小问题,defaults中同样可以定义变量,那么变量的优先级是怎样的?如果task中也存在相同变量呢?playbook命令行中又传入一个相同的呢?
        很简单 优先级 命令行(-e) &gt; task vars &gt; role vars &gt; role defaults</li>
</ul>
<p>直接来一个demo:
meta:</p>
<div class="highlight"><pre><span></span>---
<span class="n">galaxy_info:</span>
  <span class="n">author:</span> <span class="n">your</span> <span class="nb">name</span>
  <span class="n">description:</span> 
  <span class="n">company:</span> <span class="n">your</span> <span class="n">company</span> (<span class="n">optional</span>)
  <span class="c c-Singleline"># Some suggested licenses:</span>
  <span class="c c-Singleline"># - BSD (default)</span>
  <span class="c c-Singleline"># - MIT</span>
  <span class="c c-Singleline"># - GPLv2</span>
  <span class="c c-Singleline"># - GPLv3</span>
  <span class="c c-Singleline"># - Apache</span>
  <span class="c c-Singleline"># - CC-BY</span>
  <span class="n">license:</span> <span class="n">license</span> (<span class="n">GPLv2</span>, <span class="n">CC-BY</span>, <span class="n">etc</span>)
  <span class="n">min_ansible_version:</span> <span class="mf">1.2</span>
</pre></div>


<p>defaults:</p>
<div class="highlight"><pre><span></span>---
# defaults file for kernel
kernel_paramiters:
    kernel.panic:
      value: &quot;5&quot;
      # ignoreerrors: yes
    kernel.sem:
      value: &quot;5010 641280 5010 128&quot;

    kernel.shmmax:
      value: &quot;68719476736&quot;
    kernel.shmall:
      value: &quot;4294967296&quot;
    kernel.core_uses_pid:
      value: 1
    kernel.sysrq:
      value: 0
    kernel.pid_max:
      value: 4129024
    kernel.threads-max:
      value: 1029751
    kernel.shmmni:

...
</pre></div>


<p>tasks:</p>
<div class="highlight"><pre><span></span><span class="x">---</span>
<span class="x"># tasks file for kernel</span>
<span class="x">- name: KERNEL | modify file_limits</span>
<span class="x">  command: echo &#39;*  -  nofile  10240&#39; &gt;&gt; /etc/security/limits.conf;echo &quot;ulimit -n 10240&quot; &gt;&gt;/etc/profile</span>
<span class="x">  tags: KERNEL</span>

<span class="x">- name: KERNEL | modify kernel paramiters</span>
<span class="x">  sysctl: name=&quot;</span><span class="cp">{{</span> <span class="nv">item.key</span> <span class="cp">}}</span><span class="x">&quot; value=&quot;</span><span class="cp">{{</span> <span class="nv">item.value.value</span> <span class="cp">}}</span><span class="x">&quot; state=present reload=yes ignoreerrors=yes</span>
<span class="x">  with_dict: kernel_paramiters</span>

<span class="x">  tags: KERNEL</span>
</pre></div>


<p>比如你有一个site.yml:</p>
<div class="highlight"><pre><span></span>---

- name: apply common configuration to all nodes
  hosts:
    - all
  remote_user: root
  gather_facts: True


  roles:
    #- { role: kernel }
    #- role: kernel
    - kernel
</pre></div>


<p>上边的三种形式都是可以的,使用下面的命令,即可完成kernel参数的调整.</p>
<div class="highlight"><pre><span></span>ansible-playbook -i xx.ivt site.yml
</pre></div>
                </article>
                </aside><!-- /#featured -->
            <section id="content" class="body">
                <h1>Other articles</h1>
                <hr />
                    <ol id="posts-list" class="hfeed">
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/ansible-kuai-su-shang-shou-loops.html" rel="bookmark" title="Permalink to ansible 快速上手--loops">ansible 快速上手--loops</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-04-13T13:50:00+08:00">
                一 13 四月 2015
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/wyk.html">wyk</a>
        </address>
<p>In <a href="/category/ansible.html">Ansible</a>. </p>
</p>
</footer><!-- /.post-info -->                <p>Ansible提供了多种遍历操作功能,包括对特定文件等操作
* with_items标准循环</p>
<div class="highlight"><pre><span></span><span class="x">- name: add several users</span>
<span class="x">  user: name=</span><span class="cp">{{</span> <span class="nv">item</span> <span class="cp">}}</span><span class="x"> state=present groups=wheel</span>
<span class="x">  with_items:</span>
<span class="x">     - testuser1</span>
<span class="x">     - testuser2</span>
</pre></div>


<ul>
<li>笛卡尔积</li>
</ul>
<div class="highlight"><pre><span></span><span class="x">- hosts: all</span>
<span class="x">  vars:</span>
<span class="x">    - list1: [1,2,3]</span>
<span class="x">    - list2: [4,5,6]</span>
<span class="x">    - list3: [7,8,9]</span>
<span class="x">  tasks:</span>
<span class="x">    - debug: msg=&quot;</span><span class="cp">{{</span><span class="nv">item</span><span class="cp">}}</span><span class="x">&quot;</span>
<span class="x">      with_cartesian:</span>
<span class="x">        - list1</span>
<span class="x">        - list2</span>
<span class="x">        - list3</span>
</pre></div>


<ul>
<li>with_file</li>
</ul>
<div class="highlight"><pre><span></span><span class="x">---</span>
<span class="x">- hosts: all</span>

<span class="x">  tasks:</span>

<span class="x">    # emit a debug message containing …</span></pre></div>
                <a class="readmore" href="/ansible-kuai-su-shang-shou-loops.html">read more</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/ansible-kuai-su-shang-shou-prompts.html" rel="bookmark" title="Permalink to ansible 快速上手--Prompts">ansible 快速上手--Prompts</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-04-03T15:59:00+08:00">
                五 03 四月 2015
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/wyk.html">wyk</a>
        </address>
<p>In <a href="/category/ansible.html">Ansible</a>. </p>
</p>
</footer><!-- /.post-info -->                <p>prompt关键字能够实现交互式动态提供变量给playbook
* 常规用法 </p>
<div class="highlight"><pre><span></span>---
- hosts: all
  remote_user: root

  vars:
    from: &quot;camelot&quot;

  vars_prompt:
    - name: &quot;name&quot;
      prompt: &quot;what is your name?&quot;
    - name: &quot;quest&quot;
      prompt: &quot;what is your quest?&quot;
    - name: &quot;favcolor&quot;
      prompt: &quot;what is your favorite color?&quot;
</pre></div>


<ul>
<li>使用 default:</li>
</ul>
<div class="highlight"><pre><span></span>vars_prompt:

  - name: &quot;release_version&quot;
    prompt: &quot;Product release version&quot;
    default: &quot;1.0&quot;
</pre></div>


<ul>
<li>use private</li>
</ul>
<div class="highlight"><pre><span></span>vars_prompt:

  - name: &quot;some_password&quot;
    prompt …</pre></div>
                <a class="readmore" href="/ansible-kuai-su-shang-shou-prompts.html">read more</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/ansible-kuai-su-shang-shou-strategy.html" rel="bookmark" title="Permalink to ansible 快速上手--strategy">ansible 快速上手--strategy</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-03-18T09:49:00+08:00">
                三 18 三月 2015
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/wyk.html">wyk</a>
        </address>
<p>In <a href="/category/ansible.html">Ansible</a>. </p>
</p>
</footer><!-- /.post-info -->                <p>strategy 表明如何每个task在hosts中执行的相对顺序
默认主要有三种执行策略:
* linear 线性:每个task的执行在全部主机执行完成时再执行下一个</p>
<div class="highlight"><pre><span></span><span class="x">- hosts: &quot;</span><span class="cp">{{</span><span class="nv">hosts</span><span class="cp">}}</span><span class="x">&quot;</span>
<span class="x">  gather_facts: yes</span>
<span class="x">  strategy: linear</span>
<span class="x">  tasks:</span>
<span class="x">    - name: debug</span>
<span class="x">      debug: var=ansible_kernel</span>
</pre></div>


<p>执行结果:
<img alt="" src="/Users/TIGER/Desktop/WechatIMG37.jpeg" title="Optional title"></p>
<ul>
<li>free :即每个主机的执行过程是连续的,不存在等待的情况</li>
</ul>
<div class="highlight"><pre><span></span><span class="x">- hosts: &quot;</span><span class="cp">{{</span><span class="nv">hosts</span><span class="cp">}}</span><span class="x">&quot;</span>
<span class="x">  gather_facts: yes</span>
<span class="x">  strategy: free</span>
<span class="x">  tasks:</span>
<span class="x">    - name: sleep</span>
<span class="x">      shell: sleep &quot;</span><span class="cp">{{</span><span class="m">10</span><span class="o">|</span><span class="nf">random</span><span class="cp">}}</span><span class="x">&quot;;</span>
<span class="x">    - name: debug</span>
<span class="x">      debug: var=ansible_kernel</span>
</pre></div>


<p>执行结果:</p>
<ul>
<li>debug strategy:允许进入交互式（另外--step可以交互式执行tasks)，修正了相关问题后，继续执行，如：</li>
</ul>
<div class="highlight"><pre><span></span><span class="x">- hosts: test …</span></pre></div>
                <a class="readmore" href="/ansible-kuai-su-shang-shou-strategy.html">read more</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/ansible-kuai-su-shang-shou-conditionals.html" rel="bookmark" title="Permalink to ansible 快速上手--Conditionals">ansible 快速上手--Conditionals</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-03-07T22:34:00+08:00">
                六 07 三月 2015
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/wyk.html">wyk</a>
        </address>
<p>In <a href="/category/ansible.html">Ansible</a>. </p>
</p>
</footer><!-- /.post-info -->                <p>条件关键字,极大地加强了逻辑严谨性，并且提升了功能的健壮性
* when: 只有条件为真时该task才会执行</p>
<div class="highlight"><pre><span></span><span class="x">tasks:</span>
<span class="x">    - shell: echo &quot;I&#39;ve got &#39;</span><span class="cp">{{</span> <span class="nv">foo</span> <span class="cp">}}</span><span class="x">&#39; and am not afraid to use it!&quot;</span>
<span class="x">      when: foo is defined</span>

<span class="x">    - fail: msg=&quot;Bailing out. this play requires &#39;bar&#39;&quot;</span>
<span class="x">      when: bar is undefined</span>
</pre></div>


<ul>
<li>or 用在roles和include</li>
</ul>
<div class="highlight"><pre><span></span>- hosts: webservers
  roles:
     - { role: debian_stock_config, when: ansible_os_family == &#39;Debian&#39; }
</pre></div>


<div class="highlight"><pre><span></span>- include: tasks/sometasks.yml
  when …</pre></div>
                <a class="readmore" href="/ansible-kuai-su-shang-shou-conditionals.html">read more</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/ansiblekuai-su-shang-shou-kai-shi-shi-yong-playbook.html" rel="bookmark" title="Permalink to ansible快速上手--开始使用playbook">ansible快速上手--开始使用playbook</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-02-10T19:40:00+08:00">
                二 10 二月 2015
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/wyk.html">wyk</a>
        </address>
<p>In <a href="/category/ansible.html">Ansible</a>. </p>
</p>
</footer><!-- /.post-info -->                <h2>使用第一个playbook，最简单的形式</h2>
<div class="highlight"><pre><span></span>#modify_apache_config.yml
---
- hosts: webservers
  vars:
    http_port: 80
    max_clients: 200
  remote_user: root
  tasks:
    - name: ensure apache is at the latest version
      yum: name=httpd state=latest
    - name: write the apache config file
      template: src=/srv/httpd.j2 dest=/etc/httpd.conf
      notify:
      - restart apache
    - name: ensure apache is running …</pre></div>
                <a class="readmore" href="/ansiblekuai-su-shang-shou-kai-shi-shi-yong-playbook.html">read more</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/ansible-kuai-su-shang-shou-dynamic-inventory.html" rel="bookmark" title="Permalink to ansible 快速上手--dynamic inventory">ansible 快速上手--dynamic inventory</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-11-29T11:20:00+08:00">
                六 29 十一月 2014
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/wyk.html">wyk</a>
        </address>
<p>In <a href="/category/ansible.html">Ansible</a>. </p>
</p>
</footer><!-- /.post-info -->                <p>Ansible支持<a href="http://docs.ansible.com/ansible/intro_dynamic_inventory.html">动态inventory</a>:
下面是使用范例：</p>
<ul>
<li>脚本需要执行权限:</li>
</ul>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="kn">import</span> <span class="nn">json</span><span class="o">,</span><span class="nn">sys</span>
<span class="k">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
<span class="p">{</span><span class="s1">&#39;test&#39;</span><span class="p">:[</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">]</span>
<span class="p">}</span>
<span class="p">)</span>
</pre></div>
</td></tr></table>

<ul>
<li>当执行--list,脚本返回</li>
</ul>
<div class="highlight"><pre><span></span>{
    &quot;databases&quot;   : {
        &quot;hosts&quot;   : [ &quot;host1.example.com&quot;, &quot;host2.example.com&quot; ],
        &quot;vars&quot;    : {
            &quot;a&quot;   : true
        }
    },
    &quot;webservers&quot;  : [ &quot;host2.example.com&quot;, &quot;host3.example.com&quot; ],
    &quot;atlanta&quot;     : {
        &quot;hosts&quot;   : [ &quot;host1.example.com&quot;, &quot;host4 …</pre></div>
                <a class="readmore" href="/ansible-kuai-su-shang-shou-dynamic-inventory.html">read more</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/ansible-kuai-su-shang-shou.html" rel="bookmark" title="Permalink to ansible 快速上手">ansible 快速上手</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-11-28T19:10:00+08:00">
                五 28 十一月 2014
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/wyk.html">wyk</a>
        </address>
<p>In <a href="/category/ansible.html">Ansible</a>. </p>
</p>
</footer><!-- /.post-info -->                <p>Ansible 真正也是最重要的使用场景，就是playbook，顾名思义，它会像剧本一样，完成你的任务。
Ansible的模块设计遵循<a href="https://zh.wikipedia.org/wiki/%E5%86%AA%E7%AD%89">幂等性</a>的原则,在使用playbook的过程中，你将更清晰的体会到这一特点。</p>
<p>Ansible 的应用目标有如下（但不限于）几个场景：
<em> 自动化部署应用
</em> 自动化配置管理
* 自动化的持续交付</p>
<p>这里将分几个部分来介绍，方便快速理解ansible的原理及开始使用:</p>
<ul>
<li><a href="ansible-ji-ben-shi-yong.html">ansible 基本使用</a></li>
<li><a href="ansible-kuai-su-shang-shou-dynamic-inventory.html">ansible 快速上手--dynamic inventory</a></li>
<li><a href="ansible-kuai-su-shang-shou-yamlyu-fa-jian-jie.html">ansible 快速上手--yaml语法简介</a></li>
<li><a href="ansiblekuai-su-shang-shou-kai-shi-shi-yong-playbook.html">ansible快速上手－－开始使用playbook</a></li>
<li><a href="ansible-kuai-su-shang-shou-conditionals.html">ansible 快速上手--Conditionals</a></li>
<li><a href="ansible-kuai-su-shang-shou-strategy.html">ansible 快速上手--strategy</a></li>
<li><a href="ansible-kuai-su-shang-shou-prompts.html">ansible 快速上手--Prompts</a></li>
<li><a href="ansible-kuai-su-shang-shou-loops.html">ansible 快速上手--loops</a></li>
<li><a href="ansible-kuai-su-shang-shou-role.html">ansible 快速上手--role</a></li>
</ul>
                <a class="readmore" href="/ansible-kuai-su-shang-shou.html">read more</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/ansible-kuai-su-shang-shou-yamlyu-fa-jian-jie.html" rel="bookmark" title="Permalink to ansible 快速上手--yaml语法简介">ansible 快速上手--yaml语法简介</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-11-28T14:20:00+08:00">
                五 28 十一月 2014
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/wyk.html">wyk</a>
        </address>
<p>In <a href="/category/ansible.html">Ansible</a>. </p>
</p>
</footer><!-- /.post-info -->                <p>假定您有某种编程语言的基础或至少了解数组、HASH结构。
yaml类似python语言，有严格的缩进要求，一般是两个空格作为缩进比例。</p>
<h2>列表和字典</h2>
<p>列表的所有元素均使用“-”打头例如:</p>
<div class="highlight"><pre><span></span>- Apple 
- Orange 
- Strawberry 
- Mango
</pre></div>


<p>字典通过key与valuef进行标识例如 :</p>
<div class="highlight"><pre><span></span><span class="n">name</span><span class="o">:</span> <span class="n">Example</span> <span class="n">Developer</span> 
<span class="n">job</span><span class="o">:</span> <span class="n">Developer</span> 
<span class="n">skill</span><span class="o">:</span> <span class="n">Elite</span> 
</pre></div>


<p>或</p>
<div class="highlight"><pre><span></span>{name: Example Developer, job: Developer, skill: Elite}  
</pre></div>


<h2>ymal中的变量</h2>
<p>在 yaml 中可以使用vars关键字来定义变量 ：</p>
<div class="highlight"><pre><span></span><span class="n">vars</span><span class="o">:</span> 
<span class="n">var_name</span><span class="o">:</span> <span class="n">value</span>  
</pre></div>


<p>变量的引用 :</p>
<div class="highlight"><pre><span></span><span class="x">- name: add several users </span>
<span class="x">vars: </span>
<span class="x">user1: testuser1 </span>
<span class="x">user2: testuser2 </span>
<span class="x">user: name=</span><span class="cp">{{</span> <span class="nv">user1</span> <span class="cp">}}</span><span class="x"> state=present …</span></pre></div>
                <a class="readmore" href="/ansible-kuai-su-shang-shou-yamlyu-fa-jian-jie.html">read more</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/ansible-ji-ben-shi-yong.html" rel="bookmark" title="Permalink to ansible 基本使用">ansible 基本使用</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-11-28T10:20:00+08:00">
                五 28 十一月 2014
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/wyk.html">wyk</a>
        </address>
<p>In <a href="/category/ansible.html">Ansible</a>. </p>
</p>
</footer><!-- /.post-info -->                <h3>简介</h3>
<p>ansible是新出现的运维工具是基于Python研发的糅合了众多老牌运维工具的优点实现了批量操作系统配置、批量程序的部署、批量运行命令等功能。具有以下特点：
<em>  <strong>agentless</strong>模式：基于ssh服务实现工作在被监控端。监控端是ssh的客户端。
</em> 幂等性：不会重复执行相同的指令。例如不会重复安装软件
* 期望状态：只需要告诉被监控端的期望状态。</p>
<h3>安装</h3>
<p><code>pip install ansible</code></p>
<h3>定义Host Inventory（主机清单）</h3>
<p>vim /etc/ansible/hosts，有以下几种可用形式:</p>
<ul>
<li>带附属属性 </li>
</ul>
<div class="highlight"><pre><span></span>[testgroup] 
10.10.2.6     ansible_ssh_user=root 
10.10.0.11     ansible_ssh_user=root 
[others]
other1.example.com     ansible_connection=ssh        ansible_ssh_user=mpdehaan
</pre></div>


<ul>
<li>使用pattern</li>
</ul>
<div class="highlight"><pre><span></span><span class="k">[webservers …</span></pre></div>
                <a class="readmore" href="/ansible-ji-ben-shi-yong.html">read more</a>
                </div><!-- /.entry-content -->
        </article></li>
</ol><!-- /#posts-list -->
</section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="/" rel="alternate">atom feed</a></li>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>, which takes great advantages of <a href="http://python.org">python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://smashingmagazine.com">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>